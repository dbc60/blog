  <head>
    <!-- Variable definitions -->
    {{ $titleDefault := print .Title " | " .Site.Title -}}
    {{- if .IsHome -}}
      {{- $titleDefault = .Site.Title }}
    {{- end -}}

    <!-- For more info about using SCSS and this pipeline see:
      https://github.com/gohugoio/hugo/commit/dea71670c059ab4d5a42bd22503f18c087dd22d4,
      https://gohugo.io/hugo-pipes/scss-sass/, https://gohugo.io/hugo-pipes/postcss/,
      and https://gohugo.io/hugo-pipes/
    -->
    {{ $cssBase := resources.Get "style/base.css" | resources.ExecuteAsTemplate "style.base.css" . }}
    {{ $cssDropCaps := resources.Get "style/drop-caps/drop-caps.css" }}
    {{ $cssDropCapsFont := resources.Get "style/drop-caps/drop-caps--font.css" }}
    {{ $cssBreadcrumb := resources.Get "style/breadcrumbs/breadcrumb.css" }}
    {{ $cssFonts := resources.Get "style/fonts.css" }}
    {{ $styles := slice $cssBase $cssDropCaps $cssDropCapsFont $cssBreadcrumb $cssFonts | resources.Concat "style/style.css" }}

    <!-- minify and fingerprint only if not running locally -->
    {{ if not (in (print .Site.BaseURL) "localhost") }}
    {{ $styles = $styles | minify | fingerprint }}
    {{ end }}

    <!-- map . (the current context) to "context" and $titleDefault to
      titleSite. This means that anything in the block that needs to access
      dot-variables will have to use ".context.Var" instead of ".Var". For
      example, in this file I can use ".Site.BaseURL", but in any blocks or
      partials where I pass "$context" instead of ".", those blocks or partials
      will have to use ".context.Site.BaseURL".
    -->
    {{ $context := (dict "context" . "titleSite" $titleDefault "styles" $styles) }}

    {{ block "head__meta" $context }}
    {{ partial "head__meta.html" . }}
    {{ end }}

    {{ block "head__styles" $context }}
    {{ partial "head__styles.html" . }}
    {{ end }}

    {{ block "head__title" $context }}
    {{ partial "head__title.html" . }}
    {{ end }}

    {{ block "head__scripts" $context }}
    {{ partial "head__scripts.html" . }}
    {{ end }}
  </head>
