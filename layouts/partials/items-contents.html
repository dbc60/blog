<ul class="social-items">
  {{ $byDate := false }}
  {{ "<!--BEGIN layouts/partials/items-contents.html -->" | safeHTML }}
  {{ $scratch := newScratch }}
{{ if eq (len .context.Sections) 0 }}
  {{ with .context.Parent }}
    {{ $scratch.Set "sections" .Sections }}
  {{ end }}
{{ else }}
  {{ $scratch.Set "sections" .context.Sections }}
{{ end }}
{{ if eq ($scratch.Get "sections") nil }}
  {{ $scratch.Set "sections" .context.Parent.Pages }}
  {{ "<!-- I need a better way to determine which sections are ordered by date -->" | safeHTML }}
  {{ if or (eq .context.Section "journal") (eq .context.Section "post") }}
    {{ $byDate = true }}
  {{ end }}
{{ else if eq (len ($scratch.Get "sections")) 0 }}
  {{ with .context.Parent.Parent }}
    {{ $scratch.Set "sections" .Sections }}
  {{ end }}
{{ end }}
{{ $sections := $scratch.Get "sections" }}
{{ if $byDate }}
  {{ range $sections.ByDate.Reverse }}
    <li class="contents">
      <a class="secondary-nav__link" href="{{ .Permalink }}">
        {{ .Title }}
      </a>
    </li>
  {{ end }}
{{ else }}
  {{ $listLimit := 100 }}
  {{ if isset .context.Site.Params "list_limit" }}
    {{ $listLimit = .context.Site.Params.list_limit }}
  {{ end }}
  {{ range first $listLimit  $sections.ByTitle }}
    <li class="contents">
      <a class="secondary-nav__link" href="{{ .Permalink }}">
        {{ .Title }}
      </a>
    </li>
  {{ end }}
{{ end }}
{{ "<!--END layouts/partials/items-contents.html -->" | safeHTML }}
</ul>
