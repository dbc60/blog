{{ define "main" }}

{{ $section := .Site.GetPage "section" .Section }}
  <header>
    <p>
      {{/*
        CurrentSection allows us to use the section title instead of inferring from the folder.
        https://gohugo.io/variables/page/#section-variables-and-methods
      */}}
      {{with .CurrentSection.Title }}{{. | upper }}{{end}}
    </p>
    <h1>{{- .Title -}}</h1>
    <p>{{ partial "date-and-tags.html" . }}</p>
</header>

  <section>
    {{- .Content -}}
    {{ if and .Site.DisqusShortname (not (or .Site.Params.disable_comments .Params.disable_comments)) }}
    <section id="comments">
      {{ template "_internal/disqus.html" . }}
    </section>
    {{ end }}
  </section>

{{ end }}
