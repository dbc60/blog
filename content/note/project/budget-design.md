---
title:  Budget Design
date: 2016-06-12
draft: true
categories: [project]
tags: [budget, design]
---

A cornucopia of ideas for an outline of a rather detailed budget.
<!--more-->

## Budget Groups
I want to treat each group/subgroup as a bucket that needs money each month. If I spend less than what's in the bucket, there is money left over that can roll over to the next month, or some or all of it can be transferred to another bucket.

If I spend more the value goes negative. Over as many months as needed, money must be poured into that bucket until it is at least zero. For example, credit cards that aren't paid off each month will have a negative balance that must be filled over time.

There are a lot of ways to slice and dice a budget. Loans and credit card balances can be considered financial obligations or loans to be paid regularly. However, a mortgage is often considered a "Home Expense" rather than a loan/debt/obligation. Should income and property taxes be place in a Taxes group or under Obligations? On the other hand, owning an auto can include a loan payment and excise tax. Should the loan fall under Auto Expenses, or Loans and Obligations? Should excise tax fall under Obligations or should it be under a Taxes group that includes income tax?

I think the budget should have a group, Taxes, to hold all taxes - federal, state and local - whether they be income, property, excise or some other kind of tax. It will make it easier to find data for my annual tax returns.

I also think Mortgage and Auto Loans should fall under a Credit or Loan group right along side credit cards. I want to have the value of each outstanding debt, minimum payment, interest rate and monthly interest explicitly displayed and easy to find. That will help me manage the cost of each loan/debt so I know which should be paid off more quickly.

Where should utilities go? Some like to throw them under Home Expenses, others like a separate Utilities group. There are so many of them, they call for their own group. If we ever move, we'll can combine them with the Home Expenses to get a complete set of expenses to compare against to wherever we might consider moving.

## My Budget & Expense Groups
My budget has an income group, which has the following subgroups:

* Wages & Tips: regular pay
* Interest Income: interest that has been cashed in, or placed-in/transferred-to savings or checking. That is, interest that is available for allocating to a budget group. Interest from an investment that is reinvested is not available for budgeting (although, it could be recorded here and immediately recorded under a Savings subgroup that relates to the investment so the interest is not only recorded, but immediately allocated properly).
* Dividends: same idea as Interest Income.
* Gifts Received: "Thank you; very kind of you to provide me with funds."
* Refunds/Reimbursements/Credits: "The merchandise failed to meet my expectations. Please refund my money."
* From Cash Advances: "More debt?"
* Transfer from Savings: "Spending my children's inheritance."

It also has the following expense-groups (alphabetically):

1. Business: expenses for work that are not reimbursed by my employer.
2. Donations & Gifts: gifts to family and friends as well as charities. The subgroups will separate the tax-deductible from the rest.
3. Education: tuition, fees, books.
4. Entertainment: fun stuff
5. Food & Dining: food, meals
6. General Fund: money not allocated to any other budget/expense-group. The value here initially represents net income. To allocate money to another budget/expense-group, transfer money from here to a (sub)group.
7. Goods & Merchandise: clothes, toys, stuff
8. Health & Lifestyle: barbers, doctors, fitness
9. Home: furniture, lawn, garden
10. Insurance: auto, home, life
11. Loans & Debts: mortgage, credit cards, student loans.
12. Pet Care: stuff and care for critters
13. Savings: to the future!
14. Services: accounting, laundry, legal, rentals
15. Subscriptions: newspapers, magazines, memberships, professional dues
16. Taxes: federal, state, local, property
17. Travel & Transportation: parking, subway, train, plane, car rental (other than vacation).
18. Utilities: gas, electric, phone, internet, water, sewage
19. Vacation: travel, lodging, entertainment, recreation

The subgroups for each major group are:

1. Business
    * Deductible Expenses
    * Non-deductible Expenses
2. Donations & Gifts
    * Charitable Donations
    * Religious Donation
    * Gifts (holiday, birthday and other special occasions)
3. Education
    * Tuition
    * Fees
    * Books & Supplies
4. Entertainment
    * Books, Videos, DVDs and other Media
    * Rentals
    * Tickets & Events to include:
        * Movies
        * Theater
        * Concerts
        * Plays
        * Sports
        * Hobbies
        * Outdoor Recreation
        * Toys, Games & Gadgets
5. Food & Dining
    * Groceries
    * Coffee Shops
    * Fast Food
    * Restaurants
6. General Fund: no subgroups. This is the net income after all deductions from all income sources. To allocate money to another group or subgroup, transfer it from here. Similarly, transfer money back to here from another group or subgroup. This makes for a nice place to capture all budget allocations and adjustments.
7. Goods & Merchandise
    * Clothing & Accessories
    * Electronics & Computers
    * Health & Beauty
    * General Merchandise
8. Health & Lifestyle
    * Doctor & Dentist
    * Medicine & Prescriptions
    * Medical Emergency
    * Vision Care (glasses, contact lenses, etc.)
    * Clubs, Gyms, Fitness
    * Salon/Barber
    * Discretionary [Name 1] (an allowance for yourself or a family member)
    * Discretionary [Name 2] (an allowance for yourself or a family member)
9. Home
    * Furnishings & Appliances
    * Lawn & Garden Supplies & Tools
    * Home Supplies & Tools
    * Maintenance & Repairs
    * Renovations & Improvements
10. Insurance
    * Auto
    * Health
    * Home/Rental (policies covering fire, theft, flood, etc.)
    * Life
11. Loans & Debts
    * Mortgage
    * Second Mortgage
    * Credit Card No. 1
    * Credit Card No. 2
    * Credit Card No. 3
    * Student Loan
    * Fees & Charges (track these under each bank account, loan and credit card)
        * ATM Fees
        * Finance Charges
        * Late Fees
        * Other Fees & Charges
        * Service Fees
12. Pet Care
    * Food
    * Veterinary & Medical
    * Toys/Supplies
13. Savings
    * To Savings Account
    * To Emergency Fund
    * To Retirement (401K, IRA)
    * To Investments
    * To College Savings
14. Services
    * Accounting & Financial Services
    * Laundry (Laundromat, dry cleaning, etc.)
    * Home Cleaning Services
    * Government Services
    * Legal Services
    * Other Services
    * Printing, Shipping & Postage
15. Subscriptions
    * Newspaper
    * Magazines
    * Online subscriptions
    * Professional Dues
16. Taxes
    * Federal
    * State
    * Local to include:
        * Property Taxes
        * Excise Taxes
17. Travel & Transportation (other than vacation)
    * Air/Sea Travel
    * Auto/Vehicle Rental
    * Auto/Vehicle Repair & Maintenance
    * Gas & Fuel
    * Ground Transportation (bus/taxi/train)
    * Hotel & Lodging
    * Parking
    * Tolls
    * Travel Agencies
18. Utilities
    * TV, Internet, Phone
    * Mobile Phone
    * Water
    * Sewer
    * Gas
    * Electric
19. Vacation
    * Air/Sea Travel
    * Auto/Vehicle Rental
    * Gas & Fuel
    * Ground Transportation (bus/taxi/train)
    * Hotel & Lodging
    * Parking
    * Tolls
    * Travel Insurance
    * Travel Agencies
    * Food
    * Entertainment
    * Other


## Spreadsheet Organization

I want a budgeting area where each major group has a table for allocating money from the total income table into each of that group's subgroups.

Each major group and subgroup will also have a carryover value from the previous year that is added to that group's total allocation to be divided among its subgroups. The allocations should always add up to no more than total amount of money for that group, and the sum of allocations per major group should be no more than the total money on hand (income, cash, and checking). The savings and investments will be handled similarly.

There will be a separate expense sheet for each month. Expenses will have tables with the same groups as the budget. Entries into those tables will be subtracted from the budget tables in summary tables. The summary tables show totals allocated, total expenses, percentages of total on hand money and remaining money per group and totals across all groups.


## Expense Records

Most expense records should include

* on what the money was spent
* the amount
* group
* subgroup
* date (at least month and year, if not the day)
* Where the money was spent (such as the name of the store or website).


## Budget Records

It would be nice to be able to set aside funds for each group and subgroup. In fact, it seems like a good idea to enter budget limits for each subgroup and have the tool provide the totals for each group.

The tool should also handle income. It should have a place for entering gross income from a paycheck and all the deductions for taxes, health insurance, pre-tax deductions (like flexible spending accounts for healthcare) and other things deducted to come up with the net income.

All income not allocated to one of the budget groups must be reflected in a "General Fund" group. Each time money is allocated/added to a group, the General Fund is reduced by that amount - in fact a new row should be created in a table showing money transferred from the General Fund to a budget group. The general fund should never be less than zero. If that happens, the user must be notified of the situation. Transfers between groups must be recorded as two transactions. One is a transfer in to the General Fund from one group and the other is a transfer from the General Fund to the other group. The budget tool can automate this so I can just specify the transfer between groups, but the tool will handle the details of recording two separate transactions.

Likewise, there should be a net value for each group, so I can see where I'm over spending, and where I have excess funds that could potentially be reallocated to another group. It would be nice if the budget tool included a way to transfer funds between groups. That is, instead of just manipulating the original amounts I allocate each month, it should record a transfer from one group to another, or back to the general fund.


## Budget & Expense Tables

The tables below represent how I think the data in a budget should be set up.


### 1. `IncomeEvents` Table

This table records paychecks, monetary gifts received, credits and similar events.

* `RowID`: primary key.
* `DateReceived`: the date we received money.
* `Source`: a foreign key into the `IncomeSources` table.
* `Amount`: (gross income)
* `Note`: an optional note about the funds.


### 2. `IncomeSources` Table

This table records the few subgroups of income that are used in the budget.

* `RowID`: primary key
* `Name`: the name of the source of income, such as Wages & Tips, Interest, Dividends, Gifts, etc.

### 3. `IncomeDeductions` Table

* `RowID`: primary key.
* `Amount`: amount of the deduction.
* `Income`: a foreign key into the row of the `IncomeEvents` table to which this deduction applies
* `Type`: a foreign key into a row in the `DeductionTypes` table.

### 4. `DeductionTypes` Table

This table records the few types of deductions used in the budgeting tool.

* `RowID`: primary key.
* `Name`: a descriptive name of the deduction type: Federal Tax, State Tax, etc.
* `Description`: a short, helpful description of the type of deduction.

### 5. `BudgetExpenseGroups` Tables

This table divides budget-items and expense-events into a set of major groups.

* `RowID`: primary key.
* `Name`: the name of one of the groups. See the list of groups above.
* `Description`: a helpful description of the group.

### 6. `BudgetExpenseSubgroups` Table

* `RowID`: primary key.
* `Name`: the name of the subgroup.
* `Description`: a helpful description of the subgroup.
* `Group`: a foreign key into the `BudgetExpenseGroups` table.

### 7. `Expenses` Table

* `RowID`: the primary key.
* `Date`: the date of the expense.
* `Subgroup`: a foreign key into the Budget and Expense Subgroups table that this expense falls under. The Group can be derived from the Subgroup.
* `Amount`: the amount of money spent.
* `Merchant`: a reference to the `Merchants` table indicating where the money was spent.

### 8. `Merchants` Table

* `RowID`: the primary key.
* `Name`: the name of the merchant.
* `Description`: some helpful context about the merchant, such as a phrase, an address or a website.

## Views into the Budget

Once the tables are defined, I'll need various ways to view the data. Some of the views will be almost straight from the tables, but filtered by ranges of dates. I want to see income for a particular month or year, for example. Likewise, expenses by group, subgroup, month and year. Year over year annual income and expenses would be useful, too.

## Reference

Other budget categorizations and information.

### Budget Groups from the Credit Union

* Contributions
    * Charities
    * Other Charitable Contributions
    * Political & Civic Organizations
    * Religious Contributions
* Education
    * Other Education
    * Student Loans
    * Tuition & School Fees
* Entertainment
    * Activities
    * Amusements & Attractions
    * Events
    * Other Entertainment
* Fees & Charges
    * ATM Fees
    * Finance Charges
    * Late Fees
    * Other Fees & Charges
    * Service Fees
* Food & Dining
    * Alcohol & Bars
    * Coffee Shops
    * Fast Food
    * Groceries
    * Other Food & Dining
    * Restaurants
* Goods & Merchandise
    * Books & Other Media
    * Children & Toys
    * Clothing & Accessories
    * Electronics & Computers
    * Furnishings & Appliances
    * General Merchandise
    * Health & Beauty
    * Home, Garden & Tools
    * Internet Purchases
    * Mail & Phone Order Purchases
    * Miscellaneous Equipment, Materials & Supplies
    * Office Supplies
    * Specialty Stores
    * Sporting Goods
* Health & Lifestyle
    * Alimony
    * Child Care
    * Child Support
    * Clubs, Gyms, Fitness
    * Dental Care
    * Health Insurance
    * Life Insurance
    * Medical Care
    * Other Health & Lifestyle
    * Personal Care
    * Pet Care (food, toys and supplies)
    * Veterinary Care (checkups and medicine)
    * Vision Care
* Home Expenses
    * Home Owner Association (HOA) Fees
    * Home Improvement, Repair & Maintenance
    * Home Insurance
    * Mortgage
    * Other Home Expenses
    * Rent
* Miscellaneous Expenses
    * Awards & Rebate Credits
    * Cash Advances
    * Cash Withdrawal
    * Check
* Services
    * Accounting & Financial Services
    * Advertising Services
    * Government Services
    * Legal Services
    * Other Services
    * Printing & Shipping
    * Professional Dues & Subscriptions
* Transfers & Adjustments
    * Balance Adjustment
    * Credit Card Payment
    * Other Transfers & Adjustments
* Travel & Transportation
    * Air Travel
    * Auto/Vehicle Insurance
    * Auto/Vehicle Leasing & Purchase
    * Auto/Vehicle Loan
    * Auto/Vehicle Rental
    * Auto/Vehicle Repair & Maintenance
    * Gas & Fuel
    * Ground Transportation
    * Hotel & Lodging
    * Other Travel & Transportation
    * Parking & Tolls
    * Public Transit
    * Sea Travel
    * Travel Agencies
* Utilities
    * Other Utilities
    * TV, Internet, Phone
    * Water, Gas, Electric, Sewage
    * Wireless/Cellular


### Budget Groups from Vertex42

[Vertex42](http://www.vertex42.com) has a lot of spreadsheets and some free [budget templates](http://www.vertex42.com/ExcelTemplates/budgets.html). I looked at the groups in their [Family Budget Planner](http://www.vertex42.com/ExcelTemplates/family-budget-planner.html) for ideas on organizing my budget. Here are their groups:

* Income
    * Wages & Tips
    * Interest Income
    * Dividends
    * Gifts Received
    * Refunds/Reimbursements
    * Other
    * Transfer from Savings
* Savings Expense
    * To Savings Account
    * To Emergency Fund
    * To Retirement (401K, IRA)
    * To Investments
    * To College Savings
    * Other
* Home Expenses
    * Mortgage/Rent
    * Electricity
    * Gas/Oil
    * Water/Sewer/Trash
    * Phone
    * Cable/Satellite
    * Internet
    * Furnishings/Appliances
    * Lawn/Garden
    * Home Supplies
    * Maintenance
    * Improvements
    * Other
* Daily Living
    * Groceries
    * Personal Supplies
    * Clothing
    * Cleaning Services
    * Dining/Eating Out
    * Dry Cleaning
    * Salon/Barber
    * Discretionary [Name 1]
    * Discretionary [Name 2]
    * Other
* Transportation
    * Vehicle Payments
    * Fuel
    * Bus/Taxi/Train Fare
    * Registration/License
    * Other
* Health
    * Doctor/Dentist
    * Medicine/Drugs
    * Health Club Dues
    * Emergency
    * Other
* Insurance
    * Auto
    * Health
    * Home/Rental
    * Life
    * Other
* Education
    * Tuition
    * Books
    * Music Lessons
    * Other
* Charity/Gifts
    * Gifts Given
    * Charitable Donations
    * Religious Donations
    * Other
* Obligations
    * Student Loan
    * Other Loan
    * Credit Card No. 1
    * Credit Card No. 2
    * Credit Card No. 3
    * Alimony/Child Support
    * Federal Taxes
    * State/Local Taxes
    * Legal Fees
    * Other
* Business Expenses
    * Deductible Expenses
    * Non-deductible Expenses
    * Other
    * Other
* Entertainment
    * Videos/DVDs
    * Music
    * Games
    * Rentals
    * Movies/Theater
    * Concerts/Plays
    * Books
    * Hobbies
    * Film/Photos
    * Sports
    * Outdoor Recreation
    * Toys/Gadgets
    * Other
* Pets
    * Food
    * Medical
    * Toys/Supplies
    * Other
* Subscriptions
    * Newspaper
    * Magazines
    * Club Memberships
    * Other
* Vacation
    * Travel
    * Lodging
    * Food
    * Rental Car
    * Entertainment
    * Other
* Miscellaneous
    * Bank Fees
    * Postage
    * Other
    * Other
    * Other


## Notes on SQLite

Here are some notes about SQLite.

### No LIMIT Keyword by Default

I plan on using SQLite to hold all the data for my budget. As I was working through a tutorial I discovered that `DELETE FROM Cars LIMIT 5;` returned a syntax error (`Error: near "LIMIT": syntax error`). It turns out that SQLite doesn't recognize that keyword unless it's built from source and the compile option `SQLITE_ENABLE_UPDATE_DELETE_LIMIT` is defined.

### Building with the Lemon Tool

There is also another caveat about using the `lemon` tool to generate `parse.c`. See [Compilation Options for SQLite](https://www.sqlite.org/compile.html) for details.

### Using NATURAL JOIN

To use `NATURAL JOIN` most easily, give the foreign key in the child table the same name as the primary key it references in the parent table.
